# Resources per-model run/evaluation task.
# -----------------------------------------
[run_resources]
num_nodes = 1
ranks_per_node = 1
threads_per_rank = 62 # OMP_NUM_THREADS will auto-match this value
node_packing_count = 1  # serial job_mode only. How many models can run per node. Will override DEEPHYPER_WORKERS_PER_NODE, if it is set above
cpu_affinity = none # only applies to MPI job_mode


# Resources for the search application itself
# -------------------------------------------
[search_resources]
num_nodes = 1
ranks_per_node = 1
threads_per_rank = 1
node_packing_count = 1 
cpu_affinity = none


# Environment exported to all model run tasks
# This is the environment you get after loading
# datascience/tensorflow-1.12 and datascience/horovod-0.15.2
# -------------------------------------------
[environ]
KERAS_BACKEND = tensorflow
KMP_BLOCKTIME = 0
KMP_AFFINITY = "granularity=fine,compact,1,0"
OMP_NUM_THREADS = 62  # Balsam will override this with the threads_per_rank value, regardless
DEEPHYPER_PYTHON_BACKEND = /opt/intel/python/2017.0.035/intelpython35/bin/python
GNU_VERSION=7.3.0
LD_PRELOAD=/lib64/engines/libgost.so:/lib64/engines/libpadlock.so:/lib64/libcrypto.so.1.0.0:/lib64/libssl.so.1.0.0
LD_LIBRARY_PATH=/opt/intel/mkl/lib/intel64/:/soft/datascience/tensorflow/tf1.12/tensorflow:/opt/gcc/7.3.0/snos/lib64:/opt/intel/python/2017.0.035/intelpython35/lib:/opt/cray/pe/papi/5.6.0.4/lib64:/opt/cray/job/2.2.3-6.0.6.0_9.47__g6c4e934.ari/lib64:/opt/intel/compilers_and_libraries_2018.0.128/linux/compiler/lib/intel64:/opt/intel/compilers_and_libraries_2018.0.128/linux/compiler/lib/intel64_lin:/opt/intel/compilers_and_libraries_2018.0.128/linux/mpi/intel64/lib:/opt/intel/compilers_and_libraries_2018.0.128/linux/mpi/mic/lib:/opt/intel/compilers_and_libraries_2018.0.128/linux/ipp/lib/intel64:/opt/intel/compilers_and_libraries_2018.0.128/linux/compiler/lib/intel64:/opt/intel/compilers_and_libraries_2018.0.128/linux/mkl/lib/intel64:/opt/intel/compilers_and_libraries_2018.0.128/linux/tbb/lib/intel64/gcc4.4:/opt/intel/debugger_2017/libipt/intel64/lib:/opt/intel/compilers_and_libraries_2018.0.128/linux/daal/lib/intel64_lin:/opt/intel/compilers_and_libraries_2018.0.128/linux/daal/../compiler/lib/intel64_lin:/dbhome/db2cat/sqllib/lib64:/dbhome/db2cat/sqllib/lib64/gskit:/dbhome/db2cat/sqllib/lib32
TCL_LIBRARY=/opt/intel/python/2017.0.035/intelpython35/lib/tcl8.6
GCC_VERSION=7.3.0
PYTHON_VERSION=3.5
PATH=/opt/gcc/7.3.0/bin:/opt/intel/python/2017.0.035/intelpython35/bin:/opt/modulefiles/nompirun/bin:/opt/cray/pe/mpt/7.7.3/gni/bin:/opt/cray/pe/perftools/7.0.4/bin:/opt/cray/pe/papi/5.6.0.4/bin:/opt/cray/rca/2.2.18-6.0.6.0_19.14__g2aa4f39.ari/bin:/opt/cray/alps/6.6.1-6.0.6.1_4.1__ga6396bb.ari/sbin:/opt/cray/job/2.2.3-6.0.6.0_9.47__g6c4e934.ari/bin:/opt/cray/pe/craype/2.5.15/bin:/opt/intel/compilers_and_libraries_2018.0.128/linux/bin/intel64:/opt/intel/compilers_and_libraries_2018.0.128/linux/mpi/intel64/bin:/opt/intel/debugger_2017/gdb/intel64_mic/bin:/opt/cray/pe/modules/3.2.11.1/bin:/home/msalim/bin:/usr/local/bin:/usr/bin:/bin:/usr/bin/X11:/usr/games:/dbhome/db2cat/sqllib/bin:/dbhome/db2cat/sqllib/adm:/dbhome/db2cat/sqllib/misc:/usr/lib/mit/bin:/usr/lib/mit/sbin:/opt/cray/pe/bin
C_INCLUDE_PATH=/opt/intel/python/2017.0.035/intelpython35/include
_LMFILES_=/opt/cray/pe/modulefiles/modules/3.2.11.1:/opt/modulefiles/intel/18.0.0.128:/opt/cray/pe/craype/2.5.15/modulefiles/craype-network-aries:/opt/cray/pe/modulefiles/craype/2.5.15:/opt/cray/pe/modulefiles/cray-libsci/18.07.1:/opt/cray/ari/modulefiles/udreg/2.3.2-6.0.6.0_15.18__g5196236.ari:/opt/cray/ari/modulefiles/ugni/6.0.14-6.0.6.0_18.12__g777707d.ari:/opt/cray/pe/modulefiles/pmi/5.0.14:/opt/cray/ari/modulefiles/dmapp/7.1.1-6.0.6.0_51.37__g5a674e0.ari:/opt/cray/ari/modulefiles/gni-headers/5.0.12-6.0.6.0_3.26__g527b6e1.ari:/opt/cray/ari/modulefiles/xpmem/2.2.14-6.0.6.0_10.1__g34333c9.ari:/opt/cray/ari/modulefiles/job/2.2.3-6.0.6.0_9.47__g6c4e934.ari:/opt/cray/ari/modulefiles/dvs/2.7_2.2.95-6.0.6.1_9.3__gd0b8528:/opt/cray/ari/modulefiles/alps/6.6.1-6.0.6.1_4.1__ga6396bb.ari:/opt/cray/ari/modulefiles/rca/2.2.18-6.0.6.0_19.14__g2aa4f39.ari:/opt/cray/pe/modulefiles/atp/2.1.3:/opt/cray/pe/modulefiles/perftools-base/7.0.4:/opt/cray/pe/modulefiles/PrgEnv-intel/6.0.4:/opt/cray/pe/craype/2.5.15/modulefiles/craype-mic-knl:/opt/cray/pe/modulefiles/cray-mpich/7.7.3:/opt/modulefiles/nompirun/nompirun:/opt/modulefiles/intelpython35/2017.0.035:/opt/modulefiles/gcc/7.3.0:/soft/environment/modules/modulefiles/datascience/tensorflow-1.12:/soft/environment/modules/modulefiles/datascience/horovod-0.15.2
PYTHONSTARTUP=""
LOADEDMODULES=modules/3.2.11.1:intel/18.0.0.128:craype-network-aries:craype/2.5.15:cray-libsci/18.07.1:udreg/2.3.2-6.0.6.0_15.18__g5196236.ari:ugni/6.0.14-6.0.6.0_18.12__g777707d.ari:pmi/5.0.14:dmapp/7.1.1-6.0.6.0_51.37__g5a674e0.ari:gni-headers/5.0.12-6.0.6.0_3.26__g527b6e1.ari:xpmem/2.2.14-6.0.6.0_10.1__g34333c9.ari:job/2.2.3-6.0.6.0_9.47__g6c4e934.ari:dvs/2.7_2.2.95-6.0.6.1_9.3__gd0b8528:alps/6.6.1-6.0.6.1_4.1__ga6396bb.ari:rca/2.2.18-6.0.6.0_19.14__g2aa4f39.ari:atp/2.1.3:perftools-base/7.0.4:PrgEnv-intel/6.0.4:craype-mic-knl:cray-mpich/7.7.3:nompirun/nompirun:intelpython35/2017.0.035:gcc/7.3.0:datascience/tensorflow-1.12:datascience/horovod-0.15.2
GCC_PATH=/opt/gcc/7.3.0
PYTHONPATH=/soft/datascience/horovod/0.15.2/lib/python3.5/site-packages/:/soft/datascience/tensorflow/tf1.12/lib/python3.5/site-packages/:/soft/datascience/tensorflow/tf1.12
INFOPATH=/opt/gcc/7.3.0/snos/share/info:/opt/intel/documentation_2017/en/debugger//gdb-ia/info/:/opt/intel/documentation_2017/en/debugger//gdb-mic/info/:/opt/intel/documentation_2017/en/debugger//gdb-igfx/info/
PYTHON_HOME=/opt/intel/python/2017.0.035/intelpython35
